import{V as P,R as E,C as S,h as g,a as T,S as b,b as f,c as C,G as D,i as G,l as W,W as N,N as k,P as v,H as x,k as R}from"./index-CtJpMZDa.js";import{x as H,N as O,E as A,b as B,c as F,d as s,e as L,T as z,f as I,S as j,u as U,P as K,O as V,U as q}from"./shared-CzsrjQQ3.js";import{i as X,O as Z}from"./tiny-invariant-yoE86qWZ.js";let n,e,i,y,r,d,c,a;const u=new P,h=new P,J=new Date("2000-06-01T10:00:00Z"),Q=new E(0,S(67),1e3),w=Q.toECEF(),Y=g.WGS84.getSurfaceNormal(w);function _(){const t=document.getElementById("container");X(t!=null);const M=window.innerWidth/window.innerHeight;e=new T(75,M,10,1e6),e.position.copy(w),e.up.copy(Y),i=new Z(e,t),i.enableDamping=!0,i.minDistance=1e3,i.target.copy(w),y=new R,r=new b,d=new H;const l=new f(new C(2,2),d);l.frustumCulled=!1,r.add(l);const o=new D;g.WGS84.getEastNorthUpFrame(w).decompose(o.position,o.quaternion,o.scale),r.add(o);const p=new f(new G(200,60,256,64),new W({color:"white"}));p.castShadow=!0,p.receiveShadow=!0,o.add(p),c=new O(e,{correctGeometricError:!0,correctAltitude:!0,inscatter:!0,photometric:!0,skyIrradiance:!0,sunIrradiance:!0,transmittance:!0,irradianceScale:2/Math.PI,sky:!0,sun:!0,moon:!0}),n=new N({depth:!1,logarithmicDepthBuffer:!0}),n.setPixelRatio(window.devicePixelRatio),n.setSize(window.innerWidth,window.innerHeight),n.toneMapping=k,n.toneMappingExposure=10,n.shadowMap.enabled=!0,n.shadowMap.type=v,a=new A(n,{frameBufferType:x,multisampling:8});const m=new B(r,e);c.normalBuffer=m.texture,a.addPass(new F(r,e)),a.addPass(m),a.addPass(new s(e,c)),a.addPass(new s(e,new L)),a.addPass(new s(e,new z({mode:I.AGX}))),a.addPass(new s(e,new j)),a.addPass(new s(e,new U)),new K().setTypeFromRenderer(n).load("/geospatial/"+"assets/atmosphere",$),t.appendChild(n.domElement),window.addEventListener("resize",ee)}function $(t){Object.assign(d,t),Object.assign(c,t),n.setAnimationLoop(ne)}function ee(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)}function ne(){const t=+J+y.getElapsedTime()*5e6%864e5;V(t,u),q(t,h),d.sunDirection.copy(u),d.moonDirection.copy(h),c.sunDirection.copy(u),i.update(),a.render()}window.addEventListener("load",_);
