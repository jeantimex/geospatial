import{V as P,R as S,C as E,d as M,S as D,a as b,W as C,N as W,P as x,M as g,b as G,G as L,e as R,f as v,H as F,g as N}from"./index-CYDsy1T_.js";import{x as z,g as H,F as O,N as k,E as B,c as j,d as f,e as U,T as A,f as K,u as V,P as q,O as I,U as X}from"./shared-F2N6z35j.js";import{i as Z,O as J}from"./tiny-invariant-AYIrcFyz.js";let a,n,c,T,o,p,i,e,l,w;const d=new P,y=new P,Q=new Date("2000-06-01T10:00:00Z"),Y=new S(0,E(67),1e3),s=Y.toECEF(),_=M.WGS84.getSurfaceNormal(s);function $(){T=new N,o=new D;const t=window.innerWidth/window.innerHeight;n=new b(75,t,10,1e6),n.position.copy(s),n.up.copy(_);const m=document.getElementById("container");Z(m!=null),c=new J(n,m),c.enableDamping=!0,c.minDistance=1e3,c.target.copy(s),a=new C({depth:!1,logarithmicDepthBuffer:!0}),a.setPixelRatio(window.devicePixelRatio),a.setSize(window.innerWidth,window.innerHeight),a.toneMapping=W,a.toneMappingExposure=10,a.shadowMap.enabled=!0,a.shadowMap.type=x,p=new z;const h=new g(new G(2,2),p);h.frustumCulled=!1,o.add(h),i=new H,i.position.copy(s),o.add(i),e=new O({distance:300}),e.target.position.copy(s),e.castShadow=!0,e.shadow.camera.top=300,e.shadow.camera.bottom=-300,e.shadow.camera.left=-300,e.shadow.camera.right=300,e.shadow.camera.near=0,e.shadow.camera.far=600,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,e.shadow.normalBias=1,o.add(e),o.add(e.target);const r=new L;M.WGS84.getEastNorthUpFrame(s).decompose(r.position,r.quaternion,r.scale);const u=new g(new R(200,60,256,64),new v({color:"white",roughness:.5,ior:1.45,clearcoat:1,clearcoatRoughness:.1}));u.castShadow=!0,u.receiveShadow=!0,r.add(u),o.add(r),l=new k(n),w=new B(a,{frameBufferType:F,multisampling:8}),w.addPass(new j(o,n)),w.addPass(new f(n,l)),w.addPass(new f(n,new U,new A({mode:K.AGX}),new V)),new q().setTypeFromRenderer(a).load("/geospatial/"+"assets/atmosphere",ee),m.appendChild(a.domElement),window.addEventListener("resize",ae)}function ee(t){Object.assign(p,t),e.transmittanceTexture=t.transmittanceTexture,i.irradianceTexture=t.irradianceTexture,Object.assign(l,t),a.setAnimationLoop(ne)}function ae(){n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)}function ne(){const t=+Q+T.getElapsedTime()*5e6%864e5;I(t,d),X(t,y),p.sunDirection.copy(d),p.moonDirection.copy(y),e.sunDirection.copy(d),i.sunDirection.copy(d),l.sunDirection.copy(d),e.update(),i.update(),c.update(),w.render()}window.addEventListener("load",$);
